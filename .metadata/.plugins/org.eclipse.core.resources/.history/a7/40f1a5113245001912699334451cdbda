import java.io.File;
import java.nio.file.Path;
import java.nio.file.Paths;
import net.sf.sevenzipjbinding.SevenZipException;
import net.sf.sevenzipjbinding.simple.ISimpleInArchiveItem;

public class MossOutput implements MakeDir{
		public String itemName;
		public String outputDir;
		
		public MossOutput(String outputDir,String itemName){
			this.itemName = itemName;
		}
		
		@Override
		public File createDirAndFile(ISimpleInArchiveItem item) throws SevenZipException {
        	Path p = Paths.get(item.getPath());
        	
        	String itemName = p.getName(p.getNameCount()-2).toString();
        	//https://stackoverflow.com/questions/15075890/replacing-illegal-character-in-filename/15075907
        	itemName= itemName.replaceAll("[^a-zA-Z0-9\\.\\-]", "_");
			itemName = itemName.replaceAll(" ","");
			
			String[] extParts = p.getFileName().toString().split("\\.");
			if(extParts !=null){
				itemName += "."+ extParts[extParts.length-1];
			}
			
        	File file = new File(outputDir + File.separator + itemName);
        	//file.getParentFile().mkdirs();
        	return file;
		}

	}