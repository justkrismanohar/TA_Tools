package com.ta.core;

import java.io.PrintStream;

import org.junit.runner.Description;
import org.junit.runner.Result;
import org.junit.runner.notification.Failure;
import org.junit.runner.notification.RunListener;

public class JUnitExecutionListener extends RunListener {
	
    private final PrintStream writer;
    private Marksheet markingSlip;
    
    public JUnitExecutionListener(PrintStream out,Marksheet markingSlip){
    	this.writer = out;
    	this.markingSlip = markingSlip;
    }
    
    public void testFailure(Failure failure) throws Exception {
    	String[] classNameParts = failure.getDescription().getClassName().split(".");
    	String className = classNameParts[classNameParts.length-1];
    	String testCaseName = failure.getDescription().getMethodName();
    	this.markingSlip.writeRowln("",className,testCaseName,"Suggestion");
        writer.println(className + " " + testCaseName);
    }

}